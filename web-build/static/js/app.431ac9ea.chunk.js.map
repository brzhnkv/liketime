{"version":3,"sources":["components/Tasks.js","screens/Homepage2.js","screens/LoginScreen.js","screens/HomeScreen.js","components/HeaderButton.js","styles/theme.js","App.js"],"names":["Tasks","stompClient","useState","tag1","setTag1","tag2","setTag2","response","View","Text","accessibilityRole","TextInput","style","styles","textInput","textAlign","value","placeholder","onChangeText","text","Button","title","onPress","publish","destination","body","alert","StyleSheet","create","height","borderColor","borderWidth","width","marginVertical","colors","root","flex","backgroundColor","container","alignItems","justifyContent","header","toolbar","padding","flexDirection","logo","Homepage2","userProfilePic","token","loggedInUsername","isLoggedIn","isConnected","logFromServer","statusMessage","useEffect","getLoggedInUser","getLoggedInUserData","key","a","async","AsyncStorage","getItem","jsonData","data","JSON","parse","setToken","setLoggedInUsername","setUserProfilePic","profilePic","username","setIsLoggedIn","StatusBar","barStyle","MaterialCommunityIcons","name","size","color","AntDesign","stringify","removeItem","clear","console","log","Image","source","uri","connected","LoginScreen","navigation","setUsername","password","setPassword","login","titleText","secureTextEntry","navigate","fontSize","fontWeight","margin","HeaderButton","TouchableOpacity","marginRight","Stack","createStackNavigator","App","appLoaded","setAppLoaded","initialRoute","setInitialRoute","setLogFromServer","setStatusMessage","keys","getAllKeys","getData","setIsConnected","RxStomp","stompConfig","brokerURL","appendMissingNULLonIncoming","forceBinaryWSFrames","debug","str","reconnectDelay","configure","activate","watch","subscribe","message","payload","setItem","storeLoggedInUser","storeData","status","NavigationContainer","Navigator","initialRouteName","Screen","options","headerLeft","headerRight","props","startAsync","onFinish","onError"],"mappings":"sQAGe,SAASA,EAAT,GAAiC,IAAhBC,EAAe,EAAfA,YAAe,EACrBC,mBAAS,IADY,WACtCC,EADsC,KAChCC,EADgC,OAErBF,mBAAS,IAFY,WAEtCG,EAFsC,KAEhCC,EAFgC,OAGbJ,mBAAS,IAHI,WAGtCK,EAHsC,UAsD7C,OACE,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAMC,kBAAkB,UAAxB,2FACA,kBAACC,EAAA,EAAD,CACEC,MAAOC,EAAOC,UACdC,UAAU,SACVC,MAAOb,EACPc,YAAY,qBACZC,aAAc,SAACC,GAAD,OAAUf,EAAQe,MAElC,kBAACC,EAAA,EAAD,CAAQC,MAAM,iCAAQC,QAzBN,WACL,KAATnB,EAEFF,EAAYsB,QAAQ,CAAEC,YAAa,mBAAoBC,KAAMtB,IAExDuB,MAAM,oIAqBX,kBAACjB,EAAA,EAAD,CAAMC,kBAAkB,UAAxB,8CACA,kBAACC,EAAA,EAAD,CACEC,MAAOC,EAAOC,UACdC,UAAU,SACVC,MAAOX,EACPY,YAAY,qBACZC,aAAc,SAACC,GAAD,OAAUb,EAAQa,MAElC,kBAACC,EAAA,EAAD,CAAQC,MAAM,iCAAQC,QA3BD,WACV,KAATjB,EAEFJ,EAAYsB,QAAQ,CAAEC,YAAa,wBAAyBC,KAAMpB,IAE7DqB,MAAM,oIAuBX,kBAACN,EAAA,EAAD,CAAQC,MAAM,OAAOC,QAzCN,WAEjBrB,EAAYsB,QAAQ,CAAEC,YAAa,YAAaC,KAAM,QAwCpD,kBAAChB,EAAA,EAAD,kBAAiBF,IAKvB,IAAMM,EAASc,IAAWC,OAAO,CAC/Bd,UAAW,CACTe,OAAQ,GACRC,YAAa,OACbC,YAAa,EACbC,MAAO,OACPC,eAAgB,M,0BC1EdC,G,OACQ,WADRA,EAEG,OA8KHrB,EAASc,IAAWC,OAAO,CAC/BO,KAAM,CACJC,KAAM,EACNC,gBAAiBH,GAEnBI,UAAW,CACTF,KAAM,EAENG,WAAY,SACZC,eAAgB,UAElBC,OAAQ,CACNJ,gBAAiBH,GAEnBQ,QAAS,CACPC,QAAS,GACTC,cAAe,MACfJ,eAAgB,iBAElB1B,UAAW,CACTe,OAAQ,GACRC,YAAa,OACbC,YAAa,EACbC,MAAO,OAETa,KAAM,CACJb,MAAO,GACPH,OAAQ,MAIGiB,EAvMG,SAAC,GASZ,IARLC,EAQI,EARJA,eACAC,EAOI,EAPJA,MACAC,EAMI,EANJA,iBACAC,EAKI,EALJA,WACAC,EAII,EAJJA,YACAlD,EAGI,EAHJA,YACAmD,EAEI,EAFJA,cACAC,EACI,EADJA,cACI,EACwBnD,mBAAS,IADjC,wBAGkBA,mBAAS,QAH3B,wBAIoBA,mBAAS,kBAJ7B,wBAM0BA,oBAAS,IANnC,qBAQJoD,qBAAU,WAGR,OADAC,IACO,eACN,IAEH,IAAMC,EAAsB,SAAOC,GAAP,iBAAAC,EAAAC,OAAA,2EAAAD,EAAA,MAEDE,IAAaC,QAAQJ,IAFpB,OAElBK,EAFkB,OAGlBC,EAAOC,KAAKC,MAAMH,GACxBI,SAASH,EAAKf,OACdmB,oBAAoBV,GACpBW,kBAAkBL,EAAKM,YANC,oHAkBtBd,EAAkB,0BAAAG,EAAAC,OAAA,2EAAAD,EAAA,MAEGE,IAAaC,QAAQ,oBAFxB,OAEdS,EAFc,OAGpBC,eAAc,GACdf,EAAoBc,GAJA,yEAMb,MANa,iEAhCpB,EA+EoBpE,mBAAS,IA/E7B,WA+EGC,EA/EH,KA+ESC,EA/ET,OAgFoBF,mBAAS,IAhF7B,WAgFGG,EAhFH,KAgFSC,EAhFT,OAiF4BJ,mBAAS,IAjFrC,WAiFGK,EAjFH,UAiGJ,OACE,kBAACC,EAAA,EAAD,CAAMI,MAAOC,EAAOsB,MAClB,kBAACqC,EAAA,EAAD,CAAWnC,gBAAiBH,EAAmBuC,SAAU,YACzD,kBAACjE,EAAA,EAAD,CAAMI,MAAOC,EAAO4B,QAClB,kBAACjC,EAAA,EAAD,CAAMI,MAAOC,EAAO6B,SAClB,kBAACgC,EAAA,EAAD,CACEC,KAAK,OACLC,KAAM,GACNhE,MAAO,CAAEiE,MAAO3C,KAElB,kBAACzB,EAAA,EAAD,iBACA,kBAACD,EAAA,EAAD,CAAMI,MAAO,CAAEgC,cAAe,QAC5B,kBAACkC,EAAA,EAAD,CAAWH,KAAK,OAAOC,KAAM,GAAIhE,MAAO,CAAEiE,MAAO3C,OAGrD,kBAAC1B,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,eAGJ,kBAACD,EAAA,EAAD,CAAMI,MAAOC,EAAOyB,WAClB,kBAAC7B,EAAA,EAAD,2BAA0BuD,KAAKe,UAAU5B,IAEzC,kBAAC/B,EAAA,EAAD,CAAQC,MAAM,gBAAgBC,QAlDf,oBAAAoC,EAAAC,OAAA,2EAAAD,EAAA,MAEXE,IAAaoB,WAAW,oBAFb,yBAAAtB,EAAA,MAGXE,IAAaqB,SAHF,6DAOnBC,QAAQC,IAAI,SAPO,mEAmDf,kBAAC1E,EAAA,EAAD,oBAAmBuD,KAAKe,UAAU7B,IAClC,kBAACzC,EAAA,EAAD,0BAAyBwC,GACzB,kBAACxC,EAAA,EAAD,eAAcuC,GACd,kBAACoC,EAAA,EAAD,CACExE,MAAOC,EAAOgC,KACdwC,OAAQtC,EAAiB,CAAEuC,IAAKvC,GAAmB,OAIpD9C,EAAYsF,WAAa,kBAACvF,EAAD,CAAOC,YAAaA,IAC9C,kBAACO,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAMC,kBAAkB,UAAxB,2FACA,kBAACC,EAAA,EAAD,CACEC,MAAOC,EAAOC,UACdC,UAAU,SACVC,MAAOb,EACPc,YAAY,qBACZC,aAAc,SAACC,GAAD,OAAUf,EAAQe,MAElC,kBAACC,EAAA,EAAD,CAAQC,MAAM,iCAAQC,QAzDV,WACL,KAATnB,EAEFF,EAAYsB,QAAQ,CAAEC,YAAa,mBAAoBC,KAAMtB,IAExDuB,MAAM,oIAqDP,kBAACjB,EAAA,EAAD,CAAMC,kBAAkB,UAAxB,8CACA,kBAACC,EAAA,EAAD,CACEC,MAAOC,EAAOC,UACdC,UAAU,SACVC,MAAOX,EACPY,YAAY,qBACZC,aAAc,SAACC,GAAD,OAAUb,EAAQa,MAElC,kBAACC,EAAA,EAAD,CAAQC,MAAM,iCAAQC,QA3DL,WACV,KAATjB,EAEFJ,EAAYsB,QAAQ,CAAEC,YAAa,wBAAyBC,KAAMpB,IAE7DqB,MAAM,oIAuDP,kBAACN,EAAA,EAAD,CAAQC,MAAM,SACd,kBAACZ,EAAA,EAAD,kBAAiBF,IAEnB,kBAACE,EAAA,EAAD,yBAAwB2C,GACxB,kBAAC3C,EAAA,EAAD,gBAAe4C,MCzIRmC,GClCA7D,IAAWC,OAAO,IDXb,SAAC,GAAiC,IAA/B6D,EAA8B,EAA9BA,WAAYxF,EAAkB,EAAlBA,YAAkB,EACnBC,mBAAS,IADU,WAC5CoE,EAD4C,KAClCoB,EADkC,OAEnBxF,mBAAS,IAFU,WAE5CyF,EAF4C,KAElCC,EAFkC,KAS7CC,EAAQ,SAAOvB,EAAUqB,GAAjB,eAAAjC,EAAAC,OAAA,gDACNI,EAAO,CAAEO,SAAUA,EAAUqB,SAAUA,GACzC1F,EAAYsF,UACdtF,EAAYsB,QAAQ,CAClBC,YAAa,kBACbC,KAAMuC,KAAKe,UAAUhB,KAEpBrC,MAAM,mBACPzB,GAAaiF,QAAQC,IAAI,SARjB,6DAWd,OACE,kBAAC3E,EAAA,EAAD,CAAMI,MAAOC,EAAOyB,WAClB,kBAAC7B,EAAA,EAAD,CAAMG,MAAOC,EAAOiF,WAApB,sEACA,kBAACnF,EAAA,EAAD,CACEC,MAAOC,EAAOC,UACdG,YAAa,8FACbD,MAAOsD,EACPpD,aAAc,SAACC,GACbuE,EAAYvE,MAGhB,kBAACR,EAAA,EAAD,CACEC,MAAOC,EAAOC,UACdG,YAAa,uCACb8E,iBAAiB,EACjB/E,MAAO2E,EACPzE,aAAc,SAACC,GACbyE,EAAYzE,MAGhB,kBAACC,EAAA,EAAD,CAAQC,MAAM,iCAAQC,QApCN,WAClBuE,EAAMvB,EAAUqB,GAChBF,EAAWO,SAAS,cAyClBnF,EAASc,IAAWC,OAAO,CAC/BU,UAAW,CACTF,KAAM,EACNG,WAAY,UAEduD,UAAW,CACTG,SAAU,GACVC,WAAY,QAEdpF,UAAW,CACTqF,OAAQ,GACRtE,OAAQ,GACRC,YAAa,MACbC,YAAa,EACbC,MAAO,S,QE5CIoE,EAhBM,SAAC,GAAkC,IAAhC9B,EAA+B,EAA/BA,SAAUvB,EAAqB,EAArBA,eAChC,OACE,kBAACvC,EAAA,EAAD,KACE,kBAAC6F,EAAA,EAAD,CAAkBzF,MAAOC,EAAOsB,MAC9B,kBAACiD,EAAA,EAAD,CACExE,MAAOC,EAAOgC,KACdwC,OAAQ,CACNC,IAAKvC,KAGT,kBAACtC,EAAA,EAAD,CAAMG,MAAOC,EAAOM,MAAOmD,MAQ7BzD,EAASc,IAAWC,OAAO,CAC/BO,KAAM,CACJC,KAAM,EACNQ,cAAe,MACfJ,eAAgB,WAChBD,WAAY,SACZV,OAAQ,GACRyE,YAAa,GAEfzD,KAAM,CACJb,MAAO,GACPH,OAAQ,GACRyE,YAAa,GAEfnF,KAAM,CACJ8E,SAAU,GACVC,WAAY,MACZrB,MCrCS,a,kBCYP0B,G,MAAQC,eAEC,SAASC,IAAO,IAAD,EACMvG,oBAAS,GADf,WACrBwG,EADqB,KACVC,EADU,OAEQzG,oBAAS,GAFjB,WAErBgD,EAFqB,KAETqB,EAFS,OAGYrE,mBAAS,IAHrB,WAGrB0G,EAHqB,KAGPC,EAHO,OAIoB3G,mBAAS,IAJ7B,WAIrB+C,EAJqB,KAIHkB,EAJG,OAKgBjE,mBAAS,IALzB,WAKrB6C,EALqB,KAKLqB,EALK,OAMFlE,mBAAS,IANP,WAMrB8C,EANqB,KAMdkB,EANc,OAQchE,mBAAS,IARvB,WAQN4G,GARM,aAUc5G,mBAAS,IAVvB,WAUN6G,GAVM,WAYtBxD,EAAkB,0BAAAG,EAAAC,OAAA,2EAAAD,EAAA,MAEGE,IAAaC,QAAQ,oBAFxB,OAGJ,OADVS,EAFc,QAIlBuC,EAAgB,UAEhBtC,GAAc,GACdf,EAAoBc,GACpBuC,EAAgB,SARE,gDAWpBnF,MAAM,SAXc,iEAelB8B,EAAsB,SAAOC,GAAP,iBAAAC,EAAAC,OAAA,2EAAAD,EAAA,MAEDE,IAAaC,QAAQJ,IAFpB,OAElBK,EAFkB,OAGlBC,EAAOC,KAAKC,MAAMH,GACxBI,EAASH,EAAKf,OACdmB,EAAoBV,GACpBW,EAAkBL,EAAKM,YANC,oHAmC5Bf,qBAAU,WAGR,OAbiB,mBAAAI,EAAAC,OAAA,uDACbqD,EAAO,GADM,oBAAAtD,EAAA,MAGFE,IAAaqD,cAHX,OAGfD,EAHe,6DAOjB9B,QAAQC,IAAI6B,GAPK,gEAWjBC,GAEO,eACN,IAGH,IAAMC,EAAU,SAAOzD,GAAP,iBAAAC,EAAAC,OAAA,2EAAAD,EAAA,MAEQE,IAAaC,QAAQJ,IAF7B,OAGE,QADRzC,EAFM,UAIN+C,EAAOC,KAAKC,MAAMjD,GACtBkE,QAAQC,IAAI,sBAAwBpB,GACpCG,EAASH,EAAKf,OACdoB,EAAkBL,EAAKhB,gBACvBmC,QAAQC,IAAI,UAAYnC,GACxBkC,QAAQC,IAAI,QAAUpC,IATZ,+GArEY,EAuGU7C,oBAAS,GAvGnB,WAuGrBiD,EAvGqB,KAuGRgE,EAvGQ,OAwGUjH,mBAAS,IAAIkH,KAxGvB,WAwGrBnH,EAxGqB,KA+GtBoH,GA/GsB,KA+GR,CAClBC,UAAW,0CAEXC,6BAA6B,EAC7BC,qBAAqB,EACrBC,MAAO,SAAUC,GACfxC,QAAQC,IAAI,UAAYuC,IAE1BC,eAAgB,MAGlBrE,qBAAU,WACRrD,EAAY2H,UAAUP,GACtBpH,EAAY4H,WAEQ5H,EACjB6H,MAAM,4BACNC,WAAU,SAAUC,GACnB,IAAMC,EAAUjE,KAAKC,MAAM+D,EAAQvG,MAEnC,GADAyD,QAAQC,IAAI8C,GACe,OAAvBA,EAAQlE,KAAKf,MAAgB,CAC/B,IAAMsB,EAAW2D,EAAQlE,KAAKO,SAIxBP,EAAO,CAAEf,MAHDiF,EAAQlE,KAAKf,MAGLqB,WAFH4D,EAAQlE,KAAKhB,iBAxCd,SAAOuB,GAAP,EAAAZ,EAAAC,OAAA,2EAAAD,EAAA,MAEhBE,IAAasE,QAAQ,kBAAmB5D,IAFxB,6DAMxBf,IANwB,+DA2ClB4E,CAAkB7D,GArDR,SAAOb,EAAKzC,GAAZ,QAAA0C,EAAAC,OAAA,gEAEVI,EAAOC,KAAKe,UAAU/D,GAFZ,WAAA0C,EAAA,MAGRE,IAAasE,QAAQzE,EAAKM,IAHlB,6DAOhBmD,EAAQzD,GACRyB,QAAQC,IAAI,QAAU1B,GARN,gEAsDV2E,CAAU9D,EAAUP,OAOL9D,EAClB6H,MAAM,6BACNC,WAAU,SAAUC,GACnB,IAAMC,EAAUjE,KAAKC,MAAM+D,EAAQvG,MACnCsF,EAAiBkB,EAAQI,WAGXpI,EACf6H,MAAM,0BACNC,WAAU,SAAUC,GACnB,IAAMC,EAAUjE,KAAKC,MAAM+D,EAAQvG,MACnCqF,EAAiBmB,EAAQI,WAW7BlB,GAAe,KACd,IAcH,OAAKT,EAWH,kBAAC4B,EAAA,EAAD,KACE,kBAAC/B,EAAMgC,UAAP,CAAiBC,iBAAkB5B,GACjC,kBAACL,EAAMkC,OAAP,CACE9D,KAAK,OACL+D,QAAS,CACPC,WAAY,KACZC,YAAa,SAACC,GAAD,OACX,kBAAC,EAAD,CACEvE,SAAUrB,EACVF,eAAgBA,QAKrB,SAAC8F,GAAD,OACC,kBAAC,EAAD,OACMA,EADN,CAEE3F,WAAYA,EACZD,iBAAkBA,EAClBF,eAAgBA,EAChBC,MAAOA,EACPG,YAAaA,EACblD,YAAaA,QAInB,kBAACsG,EAAMkC,OAAP,CAAc9D,KAAK,UAChB,SAACkE,GAAD,OACC,kBAAC,EAAD,OACMA,EADN,CAEE1F,YAAaA,EACblD,YAAaA,UAxCrB,kBAAC,IAAD,CACE6I,WAbU,oBAAApF,EAAAC,OAAA,yEAOPJ,KAPO,6DAcVwF,SAAU,kBAAMpC,GAAa,IAC7BqC,QAAS,iB","file":"static/js/app.431ac9ea.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport { StyleSheet, TextInput, Text, View, Button } from \"react-native\";\r\n\r\nexport default function Tasks({ stompClient }) {\r\n  const [tag1, setTag1] = useState(\"\");\r\n  const [tag2, setTag2] = useState(\"\");\r\n  const [response, setResponse] = useState(\"\");\r\n\r\n  const login = async (username, password) => {\r\n    try {\r\n      var body = JSON.stringify({ username, password });\r\n\r\n      const response = await fetch(\"http://192.168.100.50:5000/test\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          username: username,\r\n          password: password,\r\n        }),\r\n      });\r\n      console.log(await response.text());\r\n      /* if (response.hasOwnProperty(\"accessToken\")) {\r\n        console.log(\"login successfull\");\r\n        console.log(response);\r\n      } else if (response.hasOwnProperty(\"error\")) {\r\n        console.log(\"login failed\");\r\n        console.log(response);\r\n      } */\r\n    } catch (e) {\r\n      console.log(\"error: \" + e);\r\n    }\r\n  };\r\n\r\n  const handleTest = () => {\r\n    //client.send(\"/app/test\");\r\n    stompClient.publish({ destination: \"/app/test\", body: \"\" });\r\n    //login(\"usersdfsaf\", \"121329\");\r\n  };\r\n\r\n  const likeAndSave = () => {\r\n    if (tag1 !== \"\") {\r\n      //client.send(\"/app/likeandsave\", {}, tag1);\r\n      stompClient.publish({ destination: \"/app/likeandsave\", body: tag1 });\r\n      //setIsInProgress(true)\r\n    } else alert(\"Тег не может быть пустым!\");\r\n  };\r\n  const sendMediaToGroup = () => {\r\n    if (tag2 !== \"\") {\r\n      //client.send(\"/app/sendmediatogroup\", {}, tag2);\r\n      stompClient.publish({ destination: \"/app/sendmediatogroup\", body: tag2 });\r\n      //setIsInProgress(true);\r\n    } else alert(\"Тег не может быть пустым!\");\r\n  };\r\n\r\n  return (\r\n    <View>\r\n      <Text accessibilityRole=\"header\">Лайк + сохранение</Text>\r\n      <TextInput\r\n        style={styles.textInput}\r\n        textAlign=\"center\"\r\n        value={tag1}\r\n        placeholder=\"Тег\"\r\n        onChangeText={(text) => setTag1(text)}\r\n      />\r\n      <Button title=\"Старт\" onPress={likeAndSave} />\r\n      <Text accessibilityRole=\"header\">Самолет</Text>\r\n      <TextInput\r\n        style={styles.textInput}\r\n        textAlign=\"center\"\r\n        value={tag2}\r\n        placeholder=\"Тег\"\r\n        onChangeText={(text) => setTag2(text)}\r\n      />\r\n      <Button title=\"Старт\" onPress={sendMediaToGroup} />\r\n      <Button title=\"Test\" onPress={handleTest} />\r\n      <Text>Response: {response}</Text>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  textInput: {\r\n    height: 40,\r\n    borderColor: \"gray\",\r\n    borderWidth: 1,\r\n    width: \"100%\",\r\n    marginVertical: 10,\r\n  },\r\n});\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  StyleSheet,\r\n  TextInput,\r\n  Text,\r\n  View,\r\n  Button,\r\n  Image,\r\n  StatusBar,\r\n} from \"react-native\";\r\nimport Tasks from \"../components/Tasks\";\r\nimport { MaterialCommunityIcons, AntDesign } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport * as encoding from \"text-encoding\";\r\n\r\nconst colors = {\r\n  themeColor: \"#E8CEBF\",\r\n  white: \"#fff\",\r\n  background: \"#f4f6fc\",\r\n  greyish: \"#a4a4a4\",\r\n  tint: \"#2b49c3\",\r\n};\r\n\r\nconst Homepage2 = ({\r\n  userProfilePic,\r\n  token,\r\n  loggedInUsername,\r\n  isLoggedIn,\r\n  isConnected,\r\n  stompClient,\r\n  logFromServer,\r\n  statusMessage,\r\n}) => {\r\n  const [cookie, setCookie] = useState(\"\");\r\n\r\n  const [log, setLog] = useState(\"log\");\r\n  const [log2, setLog2] = useState(\"not connected\");\r\n\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // getAllKeys();\r\n    getLoggedInUser();\r\n    return () => {};\r\n  }, []);\r\n\r\n  const getLoggedInUserData = async (key) => {\r\n    try {\r\n      const jsonData = await AsyncStorage.getItem(key);\r\n      const data = JSON.parse(jsonData);\r\n      setToken(data.token);\r\n      setLoggedInUsername(key);\r\n      setUserProfilePic(data.profilePic);\r\n    } catch {}\r\n  };\r\n\r\n  const storeLoggedInUser = async (username) => {\r\n    try {\r\n      await AsyncStorage.setItem(\"@logged_in_user\", username);\r\n    } catch (e) {\r\n      // error\r\n    }\r\n    getLoggedInUser(\"logged_in_user\");\r\n  };\r\n  const getLoggedInUser = async () => {\r\n    try {\r\n      const username = await AsyncStorage.getItem(\"@logged_in_user\");\r\n      setIsLoggedIn(true);\r\n      getLoggedInUserData(username);\r\n    } catch {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const storeData = async (key, value) => {\r\n    try {\r\n      let data = JSON.stringify(value);\r\n      await AsyncStorage.setItem(key, data);\r\n    } catch (e) {\r\n      // saving error\r\n    }\r\n    getData(key);\r\n    console.log(\"key: \" + key);\r\n  };\r\n\r\n  const getData = async (key) => {\r\n    try {\r\n      const value = await AsyncStorage.getItem(key);\r\n      if (value !== null) {\r\n        let data = JSON.parse(value);\r\n        console.log(\"data from getData: \" + data);\r\n        setToken(data.token);\r\n        setUserProfilePic(data.userProfilePic);\r\n        console.log(\"token: \" + token);\r\n        console.log(\"upp: \" + userProfilePic);\r\n      }\r\n    } catch (e) {\r\n      // error reading value\r\n    }\r\n  };\r\n\r\n  const deleteCookie = async () => {\r\n    try {\r\n      await AsyncStorage.removeItem(\"@logged_in_user\");\r\n      await AsyncStorage.clear();\r\n    } catch (e) {\r\n      // remove error\r\n    }\r\n    console.log(\"Done.\");\r\n  };\r\n\r\n  const [tag1, setTag1] = useState(\"\");\r\n  const [tag2, setTag2] = useState(\"\");\r\n  const [response, setResponse] = useState(\"\");\r\n  const likeAndSave = () => {\r\n    if (tag1 !== \"\") {\r\n      //client.send(\"/app/likeandsave\", {}, tag1);\r\n      stompClient.publish({ destination: \"/app/likeandsave\", body: tag1 });\r\n      //setIsInProgress(true)\r\n    } else alert(\"Тег не может быть пустым!\");\r\n  };\r\n  const sendMediaToGroup = () => {\r\n    if (tag2 !== \"\") {\r\n      //client.send(\"/app/sendmediatogroup\", {}, tag2);\r\n      stompClient.publish({ destination: \"/app/sendmediatogroup\", body: tag2 });\r\n      //setIsInProgress(true);\r\n    } else alert(\"Тег не может быть пустым!\");\r\n  };\r\n\r\n  return (\r\n    <View style={styles.root}>\r\n      <StatusBar backgroundColor={colors.themeColor} barStyle={\"default\"} />\r\n      <View style={styles.header}>\r\n        <View style={styles.toolbar}>\r\n          <MaterialCommunityIcons\r\n            name=\"text\"\r\n            size={30}\r\n            style={{ color: colors.white }}\r\n          />\r\n          <Text>LikeTime</Text>\r\n          <View style={{ flexDirection: \"row\" }}>\r\n            <AntDesign name=\"user\" size={30} style={{ color: colors.white }} />\r\n          </View>\r\n        </View>\r\n        <View>\r\n          <Text>Text</Text>\r\n        </View>\r\n      </View>\r\n      <View style={styles.container}>\r\n        <Text>StompJS connected: {JSON.stringify(isConnected)}</Text>\r\n\r\n        <Button title=\"Delete cookie\" onPress={deleteCookie} />\r\n        <Text>isLoggedIn: {JSON.stringify(isLoggedIn)}</Text>\r\n        <Text>loggedInUsername: {loggedInUsername}</Text>\r\n        <Text>token: {token}</Text>\r\n        <Image\r\n          style={styles.logo}\r\n          source={userProfilePic ? { uri: userProfilePic } : null}\r\n        />\r\n\r\n        {/* {isLoggedIn && conn && <Tasks stompClient={stompClient} />} */}\r\n        {stompClient.connected && <Tasks stompClient={stompClient} />}\r\n        <View>\r\n          <Text accessibilityRole=\"header\">Лайк + сохранение</Text>\r\n          <TextInput\r\n            style={styles.textInput}\r\n            textAlign=\"center\"\r\n            value={tag1}\r\n            placeholder=\"Тег\"\r\n            onChangeText={(text) => setTag1(text)}\r\n          />\r\n          <Button title=\"Старт\" onPress={likeAndSave} />\r\n          <Text accessibilityRole=\"header\">Самолет</Text>\r\n          <TextInput\r\n            style={styles.textInput}\r\n            textAlign=\"center\"\r\n            value={tag2}\r\n            placeholder=\"Тег\"\r\n            onChangeText={(text) => setTag2(text)}\r\n          />\r\n          <Button title=\"Старт\" onPress={sendMediaToGroup} />\r\n          <Button title=\"Test\" />\r\n          <Text>Response: {response}</Text>\r\n        </View>\r\n        <Text>Log from server: {logFromServer}</Text>\r\n        <Text>Status: {statusMessage}</Text>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  root: {\r\n    flex: 1,\r\n    backgroundColor: colors.themeColor,\r\n  },\r\n  container: {\r\n    flex: 1,\r\n\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  header: {\r\n    backgroundColor: colors.themeColor,\r\n  },\r\n  toolbar: {\r\n    padding: 16,\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  textInput: {\r\n    height: 40,\r\n    borderColor: \"gray\",\r\n    borderWidth: 1,\r\n    width: \"50%\",\r\n  },\r\n  logo: {\r\n    width: 60,\r\n    height: 60,\r\n  },\r\n});\r\n\r\nexport default Homepage2;\r\n","import React, { useState } from \"react\";\r\nimport { Button, StyleSheet, Text, TextInput, View } from \"react-native\";\r\n\r\nconst LoginScreen = ({ navigation, stompClient }) => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const handleLogin = () => {\r\n    login(username, password);\r\n    navigation.navigate(\"Home\");\r\n  };\r\n\r\n  const login = async (username, password) => {\r\n    const data = { username: username, password: password };\r\n    if (stompClient.connected)\r\n      stompClient.publish({\r\n        destination: \"/app/auth/login\",\r\n        body: JSON.stringify(data),\r\n      });\r\n    else alert(\"stomp not ready\");\r\n    if (stompClient) console.log(\"works\");\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.titleText}>Авторизация</Text>\r\n      <TextInput\r\n        style={styles.textInput}\r\n        placeholder={\"Имя пользователя\"}\r\n        value={username}\r\n        onChangeText={(text) => {\r\n          setUsername(text);\r\n        }}\r\n      />\r\n      <TextInput\r\n        style={styles.textInput}\r\n        placeholder={\"Пароль\"}\r\n        secureTextEntry={true}\r\n        value={password}\r\n        onChangeText={(text) => {\r\n          setPassword(text);\r\n        }}\r\n      />\r\n      <Button title=\"Войти\" onPress={handleLogin} />\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default LoginScreen;\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: \"center\",\r\n  },\r\n  titleText: {\r\n    fontSize: 30,\r\n    fontWeight: \"bold\",\r\n  },\r\n  textInput: {\r\n    margin: 20,\r\n    height: 40,\r\n    borderColor: \"red\",\r\n    borderWidth: 1,\r\n    width: \"80%\",\r\n  },\r\n});\r\n","import React from \"react\";\r\nimport { Button, StyleSheet, Text, View } from \"react-native\";\r\n\r\nconst HomeScreen = ({ navigation }) => {\r\n  return (\r\n    <View>\r\n      <Text>HomeScreen</Text>\r\n      <Button title=\"Login\" onPress={() => navigation.navigate(\"Login\")} />\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default HomeScreen;\r\n\r\nconst styles = StyleSheet.create({});\r\n","import React from \"react\";\r\nimport { StyleSheet, Text, View, Image, TouchableOpacity } from \"react-native\";\r\nimport { colors } from \"../styles/theme\";\r\n\r\nconst HeaderButton = ({ username, userProfilePic }) => {\r\n  return (\r\n    <View>\r\n      <TouchableOpacity style={styles.root}>\r\n        <Image\r\n          style={styles.logo}\r\n          source={{\r\n            uri: userProfilePic,\r\n          }}\r\n        />\r\n        <Text style={styles.text}>{username}</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default HeaderButton;\r\n\r\nconst styles = StyleSheet.create({\r\n  root: {\r\n    flex: 1,\r\n    flexDirection: \"row\",\r\n    justifyContent: \"flex-end\",\r\n    alignItems: \"center\",\r\n    height: 50,\r\n    marginRight: 5,\r\n  },\r\n  logo: {\r\n    width: 45,\r\n    height: 45,\r\n    marginRight: 5,\r\n  },\r\n  text: {\r\n    fontSize: 14,\r\n    fontWeight: \"500\",\r\n    color: colors.secondary,\r\n  },\r\n});\r\n","export const colors = {\r\n  primary: \"#fff\",\r\n  secondary: \"#94d82d\",\r\n};\r\n","import React, { useState, useEffect } from \"react\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { createStackNavigator } from \"@react-navigation/stack\";\nimport { StyleSheet } from \"react-native\";\nimport Homepage2 from \"./screens/Homepage2\";\nimport HomeScreen from \"./screens/HomeScreen\";\nimport LoginScreen from \"./screens/LoginScreen\";\nimport HeaderButton from \"./components/HeaderButton\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport AppLoading from \"expo-app-loading\";\nimport { RxStomp } from \"@stomp/rx-stomp\";\nimport { throttleTime, map, scan } from \"rxjs/operators\";\nimport * as encoding from \"text-encoding\";\n\nconst Stack = createStackNavigator();\n\nexport default function App() {\n  const [appLoaded, setAppLoaded] = useState(false);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [initialRoute, setInitialRoute] = useState(\"\");\n  const [loggedInUsername, setLoggedInUsername] = useState(\"\");\n  const [userProfilePic, setUserProfilePic] = useState(\"\");\n  const [token, setToken] = useState(\"\");\n\n  const [logFromServer, setLogFromServer] = useState(\"\");\n\n  const [statusMessage, setStatusMessage] = useState(\"\");\n\n  const getLoggedInUser = async () => {\n    try {\n      const username = await AsyncStorage.getItem(\"@logged_in_user\");\n      if (username == null) {\n        setInitialRoute(\"Login\");\n      } else {\n        setIsLoggedIn(true);\n        getLoggedInUserData(username);\n        setInitialRoute(\"Home\");\n      }\n    } catch (e) {\n      alert(\"error\");\n    }\n  };\n\n  const getLoggedInUserData = async (key) => {\n    try {\n      const jsonData = await AsyncStorage.getItem(key);\n      const data = JSON.parse(jsonData);\n      setToken(data.token);\n      setLoggedInUsername(key);\n      setUserProfilePic(data.profilePic);\n    } catch {}\n  };\n\n  /*   useEffect(() => {\n    // getAllKeys();\n    getLoggedInUser();\n    return () => {};\n  }, []); */\n\n  /*   useEffect(() => {\n    if (isLoggedIn) {\n      console.log(JSON.stringify(isLoggedIn));\n      setInitialRoute(\"Home\");\n    }\n  }, [isLoggedIn]); */\n\n  // START debug //\n\n  const getAllKeys = async () => {\n    let keys = [];\n    try {\n      keys = await AsyncStorage.getAllKeys();\n    } catch (e) {\n      // read key error\n    }\n    console.log(keys);\n  };\n\n  useEffect(() => {\n    getAllKeys();\n\n    return () => {};\n  }, []);\n\n  // END debug //\n  const getData = async (key) => {\n    try {\n      const value = await AsyncStorage.getItem(key);\n      if (value !== null) {\n        let data = JSON.parse(value);\n        console.log(\"data from getData: \" + data);\n        setToken(data.token);\n        setUserProfilePic(data.userProfilePic);\n        console.log(\"token: \" + token);\n        console.log(\"upp: \" + userProfilePic);\n      }\n    } catch (e) {\n      // error reading value\n    }\n  };\n  const storeData = async (key, value) => {\n    try {\n      let data = JSON.stringify(value);\n      await AsyncStorage.setItem(key, data);\n    } catch (e) {\n      // saving error\n    }\n    getData(key);\n    console.log(\"key: \" + key);\n  };\n  const storeLoggedInUser = async (username) => {\n    try {\n      await AsyncStorage.setItem(\"@logged_in_user\", username);\n    } catch (e) {\n      // error\n    }\n    getLoggedInUser(\"logged_in_user\");\n  };\n\n  const [isConnected, setIsConnected] = useState(false);\n  const [stompClient, setStompClient] = useState(new RxStomp());\n\n  let subscriptionAuth;\n  let subscriptionStatus;\n  let subscriptionLog;\n  let subscriptionLogin;\n\n  const stompConfig = {\n    brokerURL: \"wss://instanext-server.herokuapp.com/ws\",\n    //brokerURL: \"ws://192.168.100.13:5000/ws\",\n    appendMissingNULLonIncoming: true,\n    forceBinaryWSFrames: true,\n    debug: function (str) {\n      console.log(\"STOMP: \" + str);\n    },\n    reconnectDelay: 10000,\n  };\n\n  useEffect(() => {\n    stompClient.configure(stompConfig);\n    stompClient.activate();\n\n    subscriptionLogin = stompClient\n      .watch(\"/user/notification/login\")\n      .subscribe(function (message) {\n        const payload = JSON.parse(message.body);\n        console.log(payload);\n        if (payload.data.token !== null) {\n          const username = payload.data.username;\n          const token = payload.data.token;\n          const profilePic = payload.data.userProfilePic;\n\n          const data = { token, profilePic };\n          storeLoggedInUser(username);\n          storeData(username, data);\n\n          ///  setStatusMessage(\"token received\");\n          //subscriptionLogin.unsubscribe();\n        }\n      });\n\n    subscriptionStatus = stompClient\n      .watch(\"/user/notification/status\")\n      .subscribe(function (message) {\n        const payload = JSON.parse(message.body);\n        setStatusMessage(payload.status);\n      });\n\n    subscriptionLog = stompClient\n      .watch(\"/user/notification/log\")\n      .subscribe(function (message) {\n        const payload = JSON.parse(message.body);\n        setLogFromServer(payload.status);\n        /* \n\n          let id = listDataLog.listLog.length;\n          const newList = listDataLog.listLog.concat({\n            id: id,\n            message: payload.log,\n          });\n\n          setListDataLog({ ...listDataLog, listLog: newList }); */\n      });\n    setIsConnected(true);\n  }, []);\n\n  // END StompClient //\n\n  const loadApp = async () => {\n    // const images = [require('./assets/snack-icon.png')];\n\n    /*  const cacheImages = images.map(image => {\n      return Asset.fromModule(image).downloadAsync();\n    });  */\n\n    return getLoggedInUser();\n  };\n\n  if (!appLoaded) {\n    return (\n      <AppLoading\n        startAsync={loadApp}\n        onFinish={() => setAppLoaded(true)}\n        onError={() => {}}\n      />\n    );\n  }\n\n  return (\n    <NavigationContainer>\n      <Stack.Navigator initialRouteName={initialRoute}>\n        <Stack.Screen\n          name=\"Home\"\n          options={{\n            headerLeft: null,\n            headerRight: (props) => (\n              <HeaderButton\n                username={loggedInUsername}\n                userProfilePic={userProfilePic}\n              />\n            ),\n          }}\n        >\n          {(props) => (\n            <Homepage2\n              {...props}\n              isLoggedIn={isLoggedIn}\n              loggedInUsername={loggedInUsername}\n              userProfilePic={userProfilePic}\n              token={token}\n              isConnected={isConnected}\n              stompClient={stompClient}\n            />\n          )}\n        </Stack.Screen>\n        <Stack.Screen name=\"Login\">\n          {(props) => (\n            <LoginScreen\n              {...props}\n              isConnected={isConnected}\n              stompClient={stompClient}\n            />\n          )}\n        </Stack.Screen>\n      </Stack.Navigator>\n    </NavigationContainer>\n  );\n}\n"],"sourceRoot":""}